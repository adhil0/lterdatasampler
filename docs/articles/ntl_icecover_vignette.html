<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ntl_icecover and ntl_airtemp: Comparing Temperatures and Lake Ice in Madison, WI since the 19th Century (North Temperate Lakes LTER) • lterdatasets</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="ntl_icecover and ntl_airtemp: Comparing Temperatures and Lake Ice in Madison, WI since the 19th Century (North Temperate Lakes LTER)">
<meta property="og:description" content="lterdatasets">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lterdatasets</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ntl_icecover_vignette.html">ntl_icecover and ntl_airtemp: Comparing Temperatures and Lake Ice in Madison, WI since the 19th Century (North Temperate Lakes LTER)</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/allisonhorst/lterdatasets/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ntl_icecover_vignette_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>ntl_icecover and ntl_airtemp: Comparing Temperatures and Lake Ice in Madison, WI since the 19th Century (North Temperate Lakes LTER)</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/allisonhorst/lterdatasets/blob/master/vignettes/ntl_icecover_vignette.Rmd"><code>vignettes/ntl_icecover_vignette.Rmd</code></a></small>
      <div class="hidden name"><code>ntl_icecover_vignette.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/allisonhorst/lterdatasets">lterdatasets</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="co">#&gt; ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</span>
<span class="co">#&gt; ✓ ggplot2 3.3.4     ✓ purrr   0.3.4</span>
<span class="co">#&gt; ✓ tibble  3.1.2     ✓ dplyr   1.0.7</span>
<span class="co">#&gt; ✓ tidyr   1.1.3     ✓ stringr 1.4.0</span>
<span class="co">#&gt; ✓ readr   1.4.0     ✓ forcats 0.5.1</span>
<span class="co">#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span>
<span class="co">#&gt; x dplyr::filter() masks stats::filter()</span>
<span class="co">#&gt; x dplyr::lag()    masks stats::lag()</span></code></pre></div>
<p>According to the <a href="https://www.epa.gov/climate-indicators/climate-change-indicators-lake-ice#ref2">EPA</a>, lake ice duration can be an indicator of climate change. This is because lake ice is dependent on several environmental factors, so changes in these factors will influence the formation of ice on top of lakes. As a result, the study and analysis of lake ice formation can inform scientists about how quickly the climate is changing, and are critical to minimizing disruptions to lake ecosystems. We can examine the ice duration of Lake Mendota, Lake Monona, and Lake Wingra, three lakes in the Madison, WI area.</p>
<div id="explore-ice-data" class="section level2">
<h2 class="hasAnchor">
<a href="#explore-ice-data" class="anchor"></a>Explore Ice Data</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ntl_icecover</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 5</span>
<span class="co">#&gt;   lakeid       ice_on     ice_off    ice_duration  year</span>
<span class="co">#&gt;   &lt;fct&gt;        &lt;date&gt;     &lt;date&gt;            &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Lake Mendota NA         1853-04-05           NA  1852</span>
<span class="co">#&gt; 2 Lake Mendota 1853-12-27 NA                   NA  1853</span>
<span class="co">#&gt; 3 Lake Mendota 1855-12-18 1856-04-14          118  1855</span>
<span class="co">#&gt; 4 Lake Mendota 1856-12-06 1857-05-06          151  1856</span>
<span class="co">#&gt; 5 Lake Mendota 1857-11-25 1858-03-26          121  1857</span>
<span class="co">#&gt; 6 Lake Mendota 1858-12-08 1859-03-14           96  1858</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lake_ice</span> <span class="op">&lt;-</span>
  <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">ntl_icecover</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">ice_duration</span><span class="op">)</span><span class="op">)</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">lakeid</span>, y <span class="op">=</span> <span class="va">ice_duration</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>color <span class="op">=</span> <span class="va">lakeid</span>, shape <span class="op">=</span> <span class="va">lakeid</span><span class="op">)</span>,
               alpha <span class="op">=</span> <span class="fl">0.8</span>,
               width <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>
    title <span class="op">=</span> <span class="st">"Ice Duration of Lakes in the Madison, WI Area"</span>,
    y <span class="op">=</span> <span class="st">"Ice Duration (Days)"</span>,
    x <span class="op">=</span> <span class="st">"Lake"</span>,
    subtitle <span class="op">=</span> <span class="st">"North Temperate Lakes LTER"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_jitter</span><span class="op">(</span>
    <span class="fu">aes</span><span class="op">(</span>color <span class="op">=</span> <span class="va">lakeid</span><span class="op">)</span>,
    alpha <span class="op">=</span> <span class="fl">0.5</span>,
    show.legend <span class="op">=</span> <span class="cn">FALSE</span>,
    position <span class="op">=</span> <span class="fu">position_jitter</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.2</span>, seed <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>
  <span class="op">)</span>

<span class="va">lake_ice</span></code></pre></div>
<p><img src="ntl_icecover_vignette_files/figure-html/box_plot-1.png" width="672"></p>
<p>Time Series Plot:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ice_duration</span> <span class="op">&lt;-</span>
  <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">ntl_icecover</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">ice_duration</span><span class="op">)</span><span class="op">)</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">ice_duration</span>, color <span class="op">=</span> <span class="va">lakeid</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Year"</span>, y <span class="op">=</span> <span class="st">"Ice Duration (Days)"</span>, title <span class="op">=</span> <span class="st">"Ice Duration of Lakes in the Madison, WI Area"</span>, subtitle <span class="op">=</span> <span class="st">"North Temperate Lakes LTER"</span><span class="op">)</span>

<span class="va">ice_duration</span></code></pre></div>
<p><img src="ntl_icecover_vignette_files/figure-html/ice_duration-1.png" width="672"></p>
<p>Since the box plots and time series plots are similar, we can try averaging the ice duration across all three lakes:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">avg_ice</span> <span class="op">&lt;-</span> <span class="va">ntl_icecover</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">ice_duration</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>ice_duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ice_duration</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">rename</span><span class="op">(</span>avg_ice_duration <span class="op">=</span> <span class="va">ice_duration</span><span class="op">)</span>

<span class="va">avg_ice</span>
<span class="co">#&gt; # A tibble: 166 x 2</span>
<span class="co">#&gt;     year avg_ice_duration</span>
<span class="co">#&gt;    &lt;dbl&gt;            &lt;dbl&gt;</span>
<span class="co">#&gt;  1  1851             103 </span>
<span class="co">#&gt;  2  1855             118 </span>
<span class="co">#&gt;  3  1856             151 </span>
<span class="co">#&gt;  4  1857             120 </span>
<span class="co">#&gt;  5  1858              95 </span>
<span class="co">#&gt;  6  1859             110.</span>
<span class="co">#&gt;  7  1860             123 </span>
<span class="co">#&gt;  8  1861             132.</span>
<span class="co">#&gt;  9  1862             112.</span>
<span class="co">#&gt; 10  1863             128 </span>
<span class="co">#&gt; # … with 156 more rows</span></code></pre></div>
<p>Time Series Plot:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">avg_ice_duration</span> <span class="op">&lt;-</span>
  <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">avg_ice</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">avg_ice_duration</span><span class="op">)</span><span class="op">)</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">avg_ice_duration</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_smooth</span><span class="op">(</span>
    method <span class="op">=</span> <span class="va">lm</span>,
    se <span class="op">=</span> <span class="cn">FALSE</span>,
    color <span class="op">=</span> <span class="st">"blue"</span>,
    linetype <span class="op">=</span> <span class="st">"dashed"</span>
  <span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Ice Duration (Days)"</span>, x <span class="op">=</span> <span class="st">"Year"</span>, title <span class="op">=</span> <span class="st">"Average Ice Duration"</span>, subtitle <span class="op">=</span> <span class="st">"North Temperate Lakes LTER"</span><span class="op">)</span>

<span class="va">avg_ice_duration</span>
<span class="co">#&gt; `geom_smooth()` using formula 'y ~ x'</span></code></pre></div>
<p><img src="ntl_icecover_vignette_files/figure-html/ice_time-1.png" width="672"></p>
<p>The average ice duration in Madison is trending downwards. What environmental factors are influencing this change?</p>
<p><a href="http://hpkx.cnjournals.com/uploadfile/news_images/hpkx/2019-03-14/s41558-018-0393-56789.pdf">Research</a> suggests that mean annual temperature is one of the primary factors that alter lake ice formation. We can look at the temperature data of Madison, WI found in <code>ntl_airtemp</code> to see if there is a corresponding change in climate that may have influenced the change in ice duration.</p>
<p>(<em>Note that according to the original metadata: “Daily temperature data prior to 1884 were estimated from 3 times per day sampling and biases are expected and should not be comparable with data after that time.”</em>)</p>
</div>
<div id="explore-temperature-data" class="section level2">
<h2 class="hasAnchor">
<a href="#explore-temperature-data" class="anchor"></a>Explore Temperature Data</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ntl_airtemp</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;   sampledate  year ave_air_temp_adjusted</span>
<span class="co">#&gt;   &lt;date&gt;     &lt;dbl&gt;                 &lt;dbl&gt;</span>
<span class="co">#&gt; 1 1870-06-05  1870                  20  </span>
<span class="co">#&gt; 2 1870-06-06  1870                  18.3</span>
<span class="co">#&gt; 3 1870-06-07  1870                  17.5</span>
<span class="co">#&gt; 4 1870-06-09  1870                  13.3</span>
<span class="co">#&gt; 5 1870-06-10  1870                  13.9</span>
<span class="co">#&gt; 6 1870-06-11  1870                  15</span></code></pre></div>
<p>Compute the mean annual temperature:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ntl_annual_avg</span> <span class="op">&lt;-</span> <span class="va">ntl_airtemp</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarise</span><span class="op">(</span>ave_air_temp_adjusted <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ave_air_temp_adjusted</span><span class="op">)</span><span class="op">)</span>

<span class="va">ntl_annual_avg</span>
<span class="co">#&gt; # A tibble: 151 x 2</span>
<span class="co">#&gt;     year ave_air_temp_adjusted</span>
<span class="co">#&gt;    &lt;dbl&gt;                 &lt;dbl&gt;</span>
<span class="co">#&gt;  1  1869                  6.42</span>
<span class="co">#&gt;  2  1870                  8.83</span>
<span class="co">#&gt;  3  1871                  7.99</span>
<span class="co">#&gt;  4  1872                  6.72</span>
<span class="co">#&gt;  5  1873                  6.83</span>
<span class="co">#&gt;  6  1874                  8.11</span>
<span class="co">#&gt;  7  1875                  5.94</span>
<span class="co">#&gt;  8  1876                  7.53</span>
<span class="co">#&gt;  9  1877                  8.81</span>
<span class="co">#&gt; 10  1878                  9.95</span>
<span class="co">#&gt; # … with 141 more rows</span></code></pre></div>
<p>Time Series Plot:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">temp_plot</span> <span class="op">&lt;-</span>
  <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">ntl_annual_avg</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">ave_air_temp_adjusted</span><span class="op">)</span><span class="op">)</span>,
         <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">ave_air_temp_adjusted</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_smooth</span><span class="op">(</span>
    method <span class="op">=</span> <span class="va">lm</span>,
    se <span class="op">=</span> <span class="cn">FALSE</span>,
    color <span class="op">=</span> <span class="st">"blue"</span>,
    linetype <span class="op">=</span> <span class="st">"dashed"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Temperature"</span>, x <span class="op">=</span> <span class="st">"Year"</span>, title <span class="op">=</span> <span class="st">"Mean Annual Temperature in Madison, WI"</span>, subtitle <span class="op">=</span> <span class="st">"North Temperate Lakes LTER"</span><span class="op">)</span>

<span class="va">temp_plot</span>
<span class="co">#&gt; `geom_smooth()` using formula 'y ~ x'</span></code></pre></div>
<p><img src="ntl_icecover_vignette_files/figure-html/temp-1.png" width="672"></p>
<p>There seems to be a general upward trend in the mean annual temperature. As a result, there may be a relationship between temperature and ice duration.</p>
</div>
<div id="join-and-compare-ice-and-temperature-data" class="section level2">
<h2 class="hasAnchor">
<a href="#join-and-compare-ice-and-temperature-data" class="anchor"></a>Join and Compare Ice and Temperature Data</h2>
<p>To compare the ice cover and temperature data directly, the <code>ntl_airtemp</code> and <code>ntl_icecover</code> datasets can be joined together. A common variable needs to be identified to do this. In this case, the datasets can be joined on the year of observation. Since there is one temperature for each year in <code>ntl_annual_avg</code>, each temperature will be mapped to the corresponding year in the joined table. For example, a <code>ave_air_temp_adjusted</code> value of 6.416 degrees Celsius will be added to each row that has a <code>year</code> value of 1869.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ntl_full_join</span> <span class="op">&lt;-</span> <span class="va">ntl_annual_avg</span> <span class="op">%&gt;%</span> 
  <span class="fu">full_join</span><span class="op">(</span>by <span class="op">=</span> <span class="st">"year"</span>, <span class="va">ntl_icecover</span><span class="op">)</span>

<span class="va">ntl_full_join</span>
<span class="co">#&gt; # A tibble: 431 x 6</span>
<span class="co">#&gt;     year ave_air_temp_adjusted lakeid       ice_on     ice_off    ice_duration</span>
<span class="co">#&gt;    &lt;dbl&gt;                 &lt;dbl&gt; &lt;fct&gt;        &lt;date&gt;     &lt;date&gt;            &lt;dbl&gt;</span>
<span class="co">#&gt;  1  1869                  6.42 Lake Mendota 1869-12-02 1870-04-12          131</span>
<span class="co">#&gt;  2  1869                  6.42 Lake Monona  1869-11-24 1870-04-11          138</span>
<span class="co">#&gt;  3  1870                  8.83 Lake Mendota 1870-12-24 1871-04-02           99</span>
<span class="co">#&gt;  4  1870                  8.83 Lake Monona  1870-12-22 1871-04-01          100</span>
<span class="co">#&gt;  5  1871                  7.99 Lake Mendota 1871-12-19 1872-04-23          126</span>
<span class="co">#&gt;  6  1871                  7.99 Lake Monona  1871-11-30 1872-04-20          142</span>
<span class="co">#&gt;  7  1872                  6.72 Lake Mendota 1872-11-30 1873-04-23          144</span>
<span class="co">#&gt;  8  1872                  6.72 Lake Monona  1872-11-28 1873-04-18          141</span>
<span class="co">#&gt;  9  1873                  6.83 Lake Mendota 1873-11-29 1874-04-14          136</span>
<span class="co">#&gt; 10  1873                  6.83 Lake Monona  1873-11-29 1874-04-14          136</span>
<span class="co">#&gt; # … with 421 more rows</span></code></pre></div>
<p>Plot the temperature against the ice duration of each of the three lakes:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">scatter</span> <span class="op">&lt;-</span>
  <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">ntl_full_join</span> <span class="op">%&gt;%</span>
           <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">ave_air_temp_adjusted</span><span class="op">)</span> <span class="op">&amp;</span>
                    <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">ice_duration</span><span class="op">)</span><span class="op">)</span>,
         <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">ice_duration</span>, x <span class="op">=</span> <span class="va">ave_air_temp_adjusted</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>
    title <span class="op">=</span> <span class="st">"Air Temperature and Ice Duration of Lakes in Madison, WI"</span>,
    y <span class="op">=</span> <span class="st">"Ice Duration (Days)"</span>,
    x <span class="op">=</span> <span class="st">"Temperature (Celsius)"</span>,
    subtitle <span class="op">=</span> <span class="st">"North Temperate Lakes LTER"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_smooth</span><span class="op">(</span>
    method <span class="op">=</span> <span class="st">"lm"</span>,
    color <span class="op">=</span> <span class="st">"black"</span>,
    se <span class="op">=</span> <span class="cn">FALSE</span>,
    size <span class="op">=</span> <span class="fl">0.3</span>
  <span class="op">)</span>

<span class="va">scatter</span>
<span class="co">#&gt; `geom_smooth()` using formula 'y ~ x'</span></code></pre></div>
<p><img src="ntl_icecover_vignette_files/figure-html/scatter-1.png" width="672"></p>
<p>It appears that there is a negative correlation between the mean annual temperature and the amount of time that each lake was frozen. This means that as temperature increases, the ice duration decreases.</p>
<p>To compare the temperature with the ice duration on a time-series plot, calculate the percent change in ice duration and temperature from the earliest data point for both variables. The earliest year of observation for ice duration was 1851, and the earliest year of observation for temperature was 1869. These values can be determined from the <code>avg_ice</code> and <code>ntl_annual_avg</code> dataframes that were calculated earlier. First, join the full dataset with the average ice duration data that we calculated earlier, and then add two columns with the percent changes.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ice_dates</span> <span class="op">&lt;-</span> <span class="va">avg_ice</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;</span> <span class="fl">1868</span><span class="op">)</span>

<span class="va">pct_change</span> <span class="op">&lt;-</span>
  <span class="va">ntl_full_join</span> <span class="op">%&gt;%</span> <span class="fu">full_join</span><span class="op">(</span>by <span class="op">=</span> <span class="st">"year"</span>, <span class="va">avg_ice</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">mutate</span><span class="op">(</span>
    pct_change_temp <span class="op">=</span> <span class="op">(</span>
      <span class="va">ave_air_temp_adjusted</span> <span class="op">-</span> <span class="va">ntl_annual_avg</span> <span class="op">%&gt;%</span> <span class="fu">pull</span><span class="op">(</span><span class="va">ave_air_temp_adjusted</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">first</span><span class="op">(</span><span class="op">)</span> <span class="co"># ntl_annual_avg %&gt;% pull(ave_air_temp_adjusted) %&gt;% first() takes the first value from the ave_air_temp_adjusted column</span>
    <span class="op">)</span> <span class="op">*</span>
      <span class="fl">100</span> <span class="op">/</span> <span class="va">ntl_annual_avg</span> <span class="op">%&gt;%</span> <span class="fu">pull</span><span class="op">(</span><span class="va">ave_air_temp_adjusted</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">first</span><span class="op">(</span><span class="op">)</span>,
    pct_change_ice <span class="op">=</span> <span class="op">(</span>
      <span class="va">avg_ice_duration</span> <span class="op">-</span> <span class="va">avg_ice</span> <span class="op">%&gt;%</span> <span class="fu">pull</span><span class="op">(</span><span class="va">avg_ice_duration</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">first</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span> <span class="op">/</span> <span class="va">avg_ice</span> <span class="op">%&gt;%</span> <span class="fu">pull</span><span class="op">(</span><span class="va">avg_ice_duration</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">first</span><span class="op">(</span><span class="op">)</span>
    
  <span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="va">year</span>, <span class="va">pct_change_temp</span>, <span class="va">pct_change_ice</span><span class="op">)</span>

<span class="va">pct_change</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="fu">arrange</span><span class="op">(</span><span class="va">pct_change</span>, <span class="va">year</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Then plot a time series to compare the magnitude in changes in temperature and ice duration. Use the <code>pivot longer</code> function so that both lines can easily be plotted on the same axes.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">comparison_df</span> <span class="op">&lt;-</span>
  <span class="va">pct_change</span>  <span class="op">%&gt;%</span> <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">pct_change_ice</span>, <span class="va">pct_change_temp</span><span class="op">)</span><span class="op">)</span> </code></pre></div>
<p>Time Series Plot:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">comparison_plot</span> <span class="op">&lt;-</span>
  <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">comparison_df</span> ,
         <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">value</span>, color <span class="op">=</span> <span class="va">name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Year"</span>, y <span class="op">=</span> <span class="st">"Percent Change"</span>, title <span class="op">=</span> <span class="st">"Percent Change in Ice Duration and Temperature"</span>, subtitle <span class="op">=</span> <span class="st">"North Temperate Lakes LTER"</span><span class="op">)</span>

<span class="va">comparison_plot</span>
<span class="co">#&gt; Warning: Removed 17 row(s) containing missing values (geom_path).</span></code></pre></div>
<p><img src="ntl_icecover_vignette_files/figure-html/comparison_plot-1.png" width="672"></p>
<p>It appears that the change in ice somewhat mirrors the change in temperature each year, as several spikes in temperature have a corresponding dip in ice duration. This may indicate a relationship between the two variables.</p>
<p>We can use <code>stat_smooth()</code> to get a clearer picture of the overall trends present in the data:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">comparison_plot</span> <span class="op">+</span> <span class="fu">stat_smooth</span><span class="op">(</span>formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, method <span class="op">=</span> <span class="st">"loess"</span><span class="op">)</span>
<span class="co">#&gt; Warning: Removed 19 rows containing non-finite values (stat_smooth).</span>
<span class="co">#&gt; Warning: Removed 17 row(s) containing missing values (geom_path).</span></code></pre></div>
<p><img src="ntl_icecover_vignette_files/figure-html/stat_smooth-1.png" width="672"></p>
<p>To get a cleaner plot, omit the <code>geom_line()</code> function:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trend_line</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">comparison_df</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">value</span>, color <span class="op">=</span> <span class="va">name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Year"</span>, y <span class="op">=</span> <span class="st">"Perchant Change"</span>, title <span class="op">=</span> <span class="st">"Percent Change in Ice Duration and Temperature"</span>, subtitle <span class="op">=</span> <span class="st">"North Temperate Lakes LTER"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">stat_smooth</span><span class="op">(</span>formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, method <span class="op">=</span> <span class="st">"loess"</span><span class="op">)</span>

<span class="va">trend_line</span>
<span class="co">#&gt; Warning: Removed 19 rows containing non-finite values (stat_smooth).</span></code></pre></div>
<p><img src="ntl_icecover_vignette_files/figure-html/simpler_smooth-1.png" width="672"></p>
<p>Now, it is clear that after 1900, the percent change in temperature follows an upward trend and the percent change in ice duration follows a downward trend. These changes could have dramatic effects on plants, animals, and humans in Madison, WI both now and in the future.</p>
</div>
<div id="citation" class="section level1">
<h1 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h1>
<p>Anderson, L. and D. Robertson. 2020. Madison Wisconsin Daily Meteorological Data 1869 - current ver 32. Environmental Data Initiative. <a href="https://doi.org/10.6073/pasta/e3ff85971d817e9898bb8a83fb4c3a8b" class="uri">https://doi.org/10.6073/pasta/e3ff85971d817e9898bb8a83fb4c3a8b</a> (Accessed 2021-03-08).</p>
<p>Magnuson, J.J., S.R. Carpenter, and E.H. Stanley. 2021. North Temperate Lakes LTER: Ice Duration - Madison Lakes Area 1853 - current ver 35. Environmental Data Initiative. <a href="https://doi.org/10.6073/pasta/ab31f2489ee436beb73fc8f1d0213d97" class="uri">https://doi.org/10.6073/pasta/ab31f2489ee436beb73fc8f1d0213d97</a> (Accessed 2021-03-08).</p>
</div>
<div id="how-we-processed-the-raw-data" class="section level1">
<h1 class="hasAnchor">
<a href="#how-we-processed-the-raw-data" class="anchor"></a>How we processed the raw data</h1>
<div id="download-the-raw-data-from-edi-org" class="section level3">
<h3 class="hasAnchor">
<a href="#download-the-raw-data-from-edi-org" class="anchor"></a>Download the raw data from EDI.org</h3>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org">usethis</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nceas/metajam">metajam</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sfirke/janitor">janitor</a></span><span class="op">)</span>

<span class="co"># Madison Wisconsin Daily Meteorological Data 1869 - current</span>
<span class="co"># Main URL: https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-ntl.20.32</span>
<span class="va">ntl_temps_url</span> <span class="op">&lt;-</span>
  <span class="st">"https://portal.edirepository.org/nis/dataviewer?packageid=knb-lter-ntl.20.32&amp;entityid=3c7ddd692d3ac8e90bf2954a16b39e89"</span>

<span class="co"># Download the data package with metajam</span>
<span class="va">ntl_temps_download</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/metajam/man/download_d1_data.html">download_d1_data</a></span><span class="op">(</span>data_url <span class="op">=</span> <span class="va">ntl_temps_url</span>, path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="data-cleaning" class="section level3">
<h3 class="hasAnchor">
<a href="#data-cleaning" class="anchor"></a>Data Cleaning</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Read in data</span>
<span class="va">ntl_temps_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/metajam/man/read_d1_files.html">read_d1_files</a></span><span class="op">(</span><span class="va">ntl_temps_download</span><span class="op">)</span>
<span class="va">ntl_temps_raw</span> <span class="op">&lt;-</span> <span class="va">ntl_temps_files</span><span class="op">$</span><span class="va">data</span>

<span class="co"># Basic cleaning</span>
<span class="va">ntl_airtemp</span> <span class="op">&lt;-</span> <span class="va">ntl_temps_raw</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span><span class="va">sampledate</span>, <span class="va">year4</span>, <span class="va">ave_air_temp_adjusted</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">rename</span><span class="op">(</span>year <span class="op">=</span> <span class="va">year4</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/janitor/man/clean_names.html">clean_names</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div id="download-the-raw-data-from-edi-org-1" class="section level3">
<h3 class="hasAnchor">
<a href="#download-the-raw-data-from-edi-org-1" class="anchor"></a>Download the raw data from EDI.org</h3>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org">usethis</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nceas/metajam">metajam</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sfirke/janitor">janitor</a></span><span class="op">)</span>

<span class="co"># North Temperate Lakes LTER: Ice Duration - Madison Lakes Area 1853 - current</span>
<span class="co"># Main URL: https://portal.edirepository.org/nis/mapbrowse?scope=knb-lter-ntl&amp;identifier=33&amp;revision=35</span>
<span class="co"># Save link location for the data package:</span>
<span class="va">ntl_url</span> <span class="op">&lt;-</span>
  <span class="st">"https://portal.edirepository.org/nis/dataviewer?packageid=knb-lter-ntl.33.35&amp;entityid=f5bc02452cafcd461c49bd7429d8b40c"</span>

<span class="co"># Download the data package with metajam</span>
<span class="va">ntl_download</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/metajam/man/download_d1_data.html">download_d1_data</a></span><span class="op">(</span>data_url <span class="op">=</span> <span class="va">ntl_url</span>, path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="data-cleaning-1" class="section level3">
<h3 class="hasAnchor">
<a href="#data-cleaning-1" class="anchor"></a>Data Cleaning</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Read in data</span>
<span class="va">ntl_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/metajam/man/read_d1_files.html">read_d1_files</a></span><span class="op">(</span><span class="va">ntl_download</span><span class="op">)</span>
<span class="va">ntl_ice_raw</span> <span class="op">&lt;-</span> <span class="va">ntl_files</span><span class="op">$</span><span class="va">data</span>

<span class="co"># Basic cleaning</span>
<span class="va">ntl_icecover</span> <span class="op">&lt;-</span> <span class="va">ntl_ice_raw</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">iceon</span>, <span class="op">-</span><span class="va">iceoff</span>, <span class="op">-</span><span class="va">season</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">rename</span><span class="op">(</span>year <span class="op">=</span> <span class="va">year4</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>
    lakeid <span class="op">=</span> <span class="fu">recode</span><span class="op">(</span>
      <span class="va">lakeid</span>,
      <span class="st">"ME"</span> <span class="op">=</span> <span class="st">"Lake Mendota"</span>,
      <span class="st">"MO"</span> <span class="op">=</span> <span class="st">"Lake Monona"</span>,
      <span class="st">"WI"</span> <span class="op">=</span> <span class="st">"Lake Wingra"</span>
    <span class="op">)</span>,
    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span>,
    ice_duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">ice_duration</span><span class="op">)</span>,
    ice_on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="va">ice_on</span><span class="op">)</span>,
    ice_off <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="va">ice_off</span><span class="op">)</span>,
    lakeid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">lakeid</span><span class="op">)</span>,
    ice_duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/replace.html">replace</a></span><span class="op">(</span><span class="va">ice_duration</span>, <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">ice_duration</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">)</span>, <span class="cn">NA</span><span class="op">)</span> <span class="co"># change values of -999 to NA</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/janitor/man/clean_names.html">clean_names</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># makes headers formatting more consistent</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Allison Horst, Julien Brun.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
